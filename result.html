<!DOCTYPE html>
<html>
<head>
<title>Lung Analysis</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

body{
font-family:Segoe UI;
background:#eef6ff;
text-align:center;
}

.card{
width:800px;
margin:auto;
margin-top:40px;
background:white;
padding:30px;
border-radius:15px;
box-shadow:0px 0px 15px grey;
}

.value{
font-size:24px;
font-weight:bold;
}

.bar{
width:100%;
background:#ddd;
height:20px;
border-radius:10px;
}

.fill{
height:20px;
background:green;
border-radius:10px;
}

button{
margin:20px;
padding:10px 20px;
}

</style>
</head>

<body>

<div class="card">

<h2>Lung Efficiency Analysis</h2>

<p>BMI: <span class="value" id="bmi"></span></p>
<p>Capacity: <span class="value" id="capacity"></span></p>

<h3>Efficiency Level</h3>
<div class="bar">
<div class="fill" id="fill"></div>
</div>
<br>
<h2 id="efficiency"></h2>
<h3 id="risk"></h3>

<canvas id="chart"></canvas>

<button onclick="goExercise()">Exercises</button>
<button onclick="goCertificate()">Certificate</button>

</div>

<script>

let age=localStorage.getItem("age");
let height=localStorage.getItem("height")/100;
let weight=localStorage.getItem("weight");
let activity=localStorage.getItem("activity");

let bmi=(weight/(height*height)).toFixed(2);
let capacity=(4000-(age*10)-(bmi*20)+(activity*200)).toFixed(2);
let efficiency=((capacity/4000)*100).toFixed(2);

let risk="";
let color="green";

if(efficiency>85){risk="Normal";color="green";}
else if(efficiency>70){risk="Moderate";color="orange";}
else{risk="High";color="red";}

document.getElementById("bmi").innerHTML=bmi;
document.getElementById("capacity").innerHTML=capacity+" ml";
document.getElementById("efficiency").innerHTML=efficiency+"%";
document.getElementById("risk").innerHTML=risk;
document.getElementById("risk").style.color=color;

document.getElementById("fill").style.width=efficiency+"%";
document.getElementById("fill").style.background=color;

new Chart(document.getElementById('chart'),{
type:'bar',
data:{
labels:["BMI","Efficiency"],
datasets:[{
label:"Health Status",
data:[bmi,efficiency]
}]
}
});

function goExercise(){
window.location="exercise.html";
}

function goCertificate(){
localStorage.setItem("eff",efficiency);
localStorage.setItem("risk",risk);
let person=localStorage.getItem("name");
localStorage.setItem("name",person);
window.location="certificate.html";
}

</script>

</body>
</html>
